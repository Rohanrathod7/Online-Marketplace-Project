{% extends 'partials/base.html' %}
{% load static %}
{% block content %}


<body>
    <div class="container py-5">
      <!-- Toggle Button -->
      <button
        id="toggleButton"
        class="btn activate btn-outline-success mb-3"
        data-bs-toggle="button"
      >
        Filters ▼
      </button>

      <!-- Filter Section -->
      <div id="filterSection" class="collapse show">
        <div class="row gy-4">
          <!-- By Categories -->
          <div class="col-md-3">
            <div class="filter-card">
              <h5 class="filter-title">By Categories</h5>
              <div class="hover-text">Milks and Dairies</div>
              <div class="hover-text">Clothing & Beauty</div>
              <div class="hover-text">Pet Foods & Toy</div>
              <div class="hover-text">Baking Material</div>
            </div>
          </div>

          <!-- By Vendors -->
          <div class="col-md-3">
            <div class="filter-card">
              <h5 class="filter-title">By Vendors</h5>
              <div class="filter-option">
                <label
                  ><input type="checkbox" class="form-check-input me-2" />
                  Aldi</label
                >
              </div>
              <div class="filter-option">
                <label
                  ><input type="checkbox" class="form-check-input me-2" />
                  Adidas</label
                >
              </div>
              <div class="filter-option">
                <label
                  ><input type="checkbox" class="form-check-input me-2" />
                  Burbe</label
                >
              </div>
              <div class="filter-option">
                <label
                  ><input type="checkbox" class="form-check-input me-2" />
                  Chanel</label
                >
              </div>
              <div class="filter-option">
                <label
                  ><input type="checkbox" class="form-check-input me-2" />
                  Prada</label
                >
              </div>
            </div>
          </div>

          <!-- By Tags -->
          <div class="col-md-3">
            <div class="filter-card">
              <h5 class="filter-title">By Tags</h5>
              <div class="filter-tags">
                <span class="tag">Milk <span>&times;</span></span>
                <span class="tag">Broccoli <span>&times;</span></span>
                <span class="tag">Smoothie <span>&times;</span></span>
                <span class="tag">Fruit <span>&times;</span></span>
                <span class="tag">Salad <span>&times;</span></span>
                <span class="tag">Appetizer <span>&times;</span></span>
              </div>
            </div>
          </div>

          <!-- By Price -->
          <div class="col-md-3">
            <div class="filter-card">
              <h5 class="filter-title">By Price</h5>
              <div class="range-slider">
                <input
                  type="range"
                  min="0"
                  max="1000"
                  value="200"
                  id="rangeMin"
                />
                <input
                  type="range"
                  min="0"
                  max="1000"
                  value="800"
                  id="rangeMax"
                />
                <div class="range-label">
                  <span id="minLabel">$200</span>
                  <span id="maxLabel">$800</span>
                </div>
              </div>
              <img
                src="https://via.placeholder.com/150"
                alt="Price Image"
                class="price-image"
              />
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="bootstrap-tabs product-tabs">
        <div class="tab-pane fade show active" id="nav-all" role="tabpanel" aria-labelledby="nav-all-tab">

            <div class="product-grid row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5">
            
              {% for p in products%}
              <div class="col">
                <div class="product-item">
                  <span class="badge bg-success position-absolute m-3">-{{p.get_percentage | floatformat:0}}%</span>
                  <a href="#" class="btn-wishlist"><svg width="24" height="24"><use xlink:href="#heart"></use></svg></a>
                  <figure >
                    <a href="single-product.html" title="Product Title">
                      <img src="{{ p.image.url }}"  class="img-fluid tab-image" style="width: 250px; height: 250px; object-fit: cover;">
                    </a>
                  </figure>
                  
                  <div class="row g-0">
                    <div class="col-md-4">
                      <p class="m-0">{{p.category}}</p>
                    </div>
                    <div class="col-md-8 text-end">
                      <span class="rating text-end"><svg width="24" height="24" class="text-primary mb-2"><use xlink:href="#star-solid"></use></svg> </span></div>
                      <!-- <span class="rating text-end"> </span> -->
                    </div>
                  <h3>{{ p.title }}</h3>
                  <div>
                    <!-- <span class="qty">{% if p.in_stock %}In-Stock{% else %}<p>Out-of-Stocks</p>{% endif %}</span><span class="rating"><svg width="24" height="24" class="text-primary"><use xlink:href="#star-solid"></use></svg> </span> -->
                    <span class="font-small text-muted">By <a href="vendoe-detail.html">{{p.vendor.title}}</a></span>
                  </div>
                  <span class="price">${{p.price}}</span>
                  <div class="d-flex align-items-center justify-content-between">
                    <div class="input-group product-qty">
                        <span class="input-group-btn">
                            <button type="button" class="quantity-left-minus btn btn-danger btn-number" data-type="minus">
                              <svg width="16" height="16"><use xlink:href="#minus"></use></svg>
                            </button>
                        </span>
                        <input type="text" id="quantity" name="quantity" class="form-control input-number" value="1">
                        <span class="input-group-btn">
                            <button type="button" class="quantity-right-plus btn btn-success btn-number" data-type="plus">
                                <svg width="16" height="16"><use xlink:href="#plus"></use></svg>
                            </button>
                        </span>
                    </div>
                    <a href="#" class="nav-link">Add to Cart <iconify-icon icon="uil:shopping-cart"></a>
                  </div>
                </div>
              </div>
              {% endfor %}
              
            </div>
            <!-- / product-grid -->
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      const toggleButton = document.getElementById("toggleButton");
      const filterSection = document.getElementById("filterSection");

      toggleButton.addEventListener("click", () => {
        const isOpen = filterSection.classList.contains("show");
        filterSection.classList.toggle("show");
        toggleButton.innerText = isOpen ? "Filters ▲" : "Filters ▼";
      });

      const rangeMin = document.getElementById("rangeMin");
      const rangeMax = document.getElementById("rangeMax");
      const minLabel = document.getElementById("minLabel");
      const maxLabel = document.getElementById("maxLabel");

      rangeMin.addEventListener("input", () => {
        if (parseInt(rangeMin.value) > parseInt(rangeMax.value)) {
          rangeMin.value = rangeMax.value;
        }
        minLabel.innerText = `$${rangeMin.value}`;
      });

      rangeMax.addEventListener("input", () => {
        if (parseInt(rangeMax.value) < parseInt(rangeMin.value)) {
          rangeMax.value = rangeMin.value;
        }
        maxLabel.innerText = `$${rangeMax.value}`;
      });
    </script>
</body>
{% endblock content %}